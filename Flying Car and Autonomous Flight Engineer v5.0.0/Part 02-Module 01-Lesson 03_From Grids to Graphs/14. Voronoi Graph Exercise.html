<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Voronoi Graph Exercise
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      From Grids to Graphs
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Sebastian Introduction.html">
       01. Sebastian Introduction
      </a>
     </li>
     <li class="">
      <a href="02. Introduction to Graphs.html">
       02. Introduction to Graphs
      </a>
     </li>
     <li class="">
      <a href="03. Waypoint Extraction.html">
       03. Waypoint Extraction
      </a>
     </li>
     <li class="">
      <a href="04. Collinearity.html">
       04. Collinearity
      </a>
     </li>
     <li class="">
      <a href="05. Collinearity Exercise.html">
       05. Collinearity Exercise
      </a>
     </li>
     <li class="">
      <a href="06. Ray Tracing.html">
       06. Ray Tracing
      </a>
     </li>
     <li class="">
      <a href="07. Bresenham.html">
       07. Bresenham
      </a>
     </li>
     <li class="">
      <a href="08. Bresenham Exercise.html">
       08. Bresenham Exercise
      </a>
     </li>
     <li class="">
      <a href="09. Putting it Together Exercise.html">
       09. Putting it Together Exercise
      </a>
     </li>
     <li class="">
      <a href="10. Grids to Graphs.html">
       10. Grids to Graphs
      </a>
     </li>
     <li class="">
      <a href="11. Graph Tradeoffs.html">
       11. Graph Tradeoffs
      </a>
     </li>
     <li class="">
      <a href="12. Generating Graphs.html">
       12. Generating Graphs
      </a>
     </li>
     <li class="">
      <a href="13. Medial Axis Exercise.html">
       13. Medial Axis Exercise
      </a>
     </li>
     <li class="">
      <a href="14. Voronoi Graph Exercise.html">
       14. Voronoi Graph Exercise
      </a>
     </li>
     <li class="">
      <a href="15. Graph Search Exercise.html">
       15. Graph Search Exercise
      </a>
     </li>
     <li class="">
      <a href="16. Deadbands.html">
       16. Deadbands
      </a>
     </li>
     <li class="">
      <a href="17. Summary.html">
       17. Summary
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          14. Voronoi Graph Exercise
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h1 id="voronoi-graphs">
          Voronoi Graphs
         </h1>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/screen-shot-2018-02-24-at-9.01.56-pm.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          Voronoi diagrams can be tricky to construct, but thankfully Python's
          <a href="https://www.scipy.org/" rel="noopener noreferrer" target="_blank">
           SciPy library
          </a>
          already has an implementation of the
          <a href="https://docs.scipy.org/doc/scipy-0.18.1/reference/generated/scipy.spatial.Voronoi.html" rel="noopener noreferrer" target="_blank">
           Voronoi method
          </a>
          built in! The way this method works is that you need to feed in a set of points that, in our case, represent the obstacles, and create a
          <code>
           Voronoi()
          </code>
          object that contains a graph of the "ridges" that define the midline in free space between the obstacles.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          For example, you can generate some random points and plot up the associated Voronoi graph like this:
         </p>
         <pre><code class="python language-python"># Import numpy and Voronoi method and plotting routines
import numpy as np
from scipy.spatial import Voronoi, voronoi_plot_2d
import matplotlib.pyplot as plt

# Generate 50 random points with integer values between 0 and 49
points = np.random.randint(50, size=(50, 2))
# Extract the Voronoi diagram
graph = Voronoi(points)
# Plot it up!
voronoi_plot_2d(graph)
plt.show()</code></pre>
         <p>
          And you get something that looks like this (will look different if you try this at home because values are random):
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/screen-shot-2018-02-24-at-9.43.55-pm.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          In this image, you can think of the blue points as obstacles (inputs to the Voronoi method), and orange points are the intersections of the Voronoi ridges, or in other words, the nodes in a graph that navigates between the obstacles!
         </p>
         <p>
          In the real world, of course, obstacles are not points but they have some size and shape. Still, the Voronoi method can be a useful starting point for generating a planning graph around real world obstacles and that's what we're going to do next!
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h3 id="extracting-nodes-and-edges">
          Extracting Nodes and Edges
         </h3>
         <p>
          For the example shown above, the edges in the graph or "ridges" as they're often called in the context of Voronoi diagrams, all represent feasible paths to navigate around those point obstacles.  In the upcoming exercise, you'll start by creating a similar graph based on obstacle center points, but then you need to add an additional step to test whether edges in the graph are traversing free or infeasible space.
         </p>
         <p>
          Within the
          <code>
           graph
          </code>
          object created in the code snippet above, you've got all the information you need to extract nodes and edges and test for feasibility. The
          <code>
           graph.vertices
          </code>
          attribute contains the x and y positions of each of the vertices (or nodes), and
          <code>
           graph.ridge_vertices
          </code>
          contains the indices that identify each pair of points that define a ridge in the
          <code>
           graph.vertices
          </code>
          list.  I think that will make more sense if I say it in code!
         </p>
         <pre><code class="python language-python"># Assuming you've created a graph object as shown above
# You can step through each pair of points that define a ridge like this
edges = []  # Empty list to contain valid edges
for v in graph.ridge_vertices:
    p1 = graph.vertices[v[0]]
    p2 = graph.vertices[v[1]]

    # Then you can test each pair p1 and p2 for collision using Bresenham
    # (need to convert to integer if using prebuilt Python package)
    # If the edge does not hit an obstacle
    # add it to the list
    if not in_collision:
        edges.append((p1, p2))</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          Your goal is to plot up all the valid edges and the result should look something like this:
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/screen-shot-2018-02-25-at-3.21.36-pm.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h3 id="voronoi-exercise">
          Voronoi Exercise
         </h3>
         <p>
          In the notebook below, you'll read in the map of the world that you've been using in previous exercises and generate a Voronoi graph like the one above for obstacles that are not simple points, but actual 2D polygons in the ground plane.  To accomplish this task, you'll need to fill in the TODOs in the
          <code>
           create_grid_and_edges()
          </code>
          function below.
         </p>
         <p>
          Good luck! And for a peek at our solution you can scroll down to the link at the bottom of the notebook.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div class="jumbotron">
         <h3>
          Workspace
         </h3>
         <p class="lead">
          This section contains either a workspace (it can be a
          <a href="http://jupyter.org/" target="_blank">
           Jupyter
      Notebook
          </a>
          workspace or an online code editor work space, etc.) and it cannot be automatically downloaded to be
    generated here. Please access the classroom with your account and manually download the workspace to your local
    machine. Note that for some courses, Udacity upload the workspace files onto
          <a href="https://github.com/udacity" target="_blank">
           https://github.com/udacity
          </a>
          , so you may be able to download them there.
         </p>
         <h4>
          Workspace Information:
         </h4>
         <ul>
          <li>
           <strong>
            Default file path:
           </strong>
          </li>
          <li>
           <strong>
            Workspace type:
           </strong>
           jupyter
          </li>
          <li>
           <strong>
            Opened files (when workspace is loaded):
           </strong>
           n/a
          </li>
         </ul>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="15. Graph Search Exercise.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('14. Voronoi Graph Exercise')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
